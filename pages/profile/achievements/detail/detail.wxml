<!--æˆå°±è¯¦æƒ…é¡µé¢-->
<view class="container">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>
  
  <!-- æˆå°±ä¸å­˜åœ¨ -->
  <view class="empty-container" wx:elif="{{!achievement}}">
    <view class="empty-icon">ğŸ”</view>
    <view class="empty-text">æˆå°±ä¸å­˜åœ¨æˆ–å·²è¢«åˆ é™¤</view>
    <button class="btn btn-primary" bindtap="navigateBack">è¿”å›</button>
  </view>
  
  <!-- æˆå°±è¯¦æƒ… -->
  <block wx:else>
    <!-- æˆå°±å¤´éƒ¨ -->
    <view class="achievement-header">
      <view class="achievement-icon-container {{achievement.isCompleted ? 'completed' : ''}}">
        <text class="iconfont icon-{{achievement.icon}}"></text>
      </view>
      
      <view class="achievement-title">{{achievement.title}}</view>
      <view class="achievement-description">{{achievement.description}}</view>
      
      <view class="achievement-status">
        <block wx:if="{{achievement.isCompleted}}">
          <view class="status-tag completed">å·²å®Œæˆ</view>
          <view class="completion-date">{{achievement.completedAt}} è§£é”</view>
        </block>
        <block wx:else>
          <view class="progress-container">
            <view class="progress-bar">
              <view class="progress-inner" style="width: {{achievement.progress}}%;"></view>
            </view>
            <view class="progress-text">{{achievement.progress}}%</view>
          </view>
        </block>
      </view>
      
      <view class="achievement-reward" wx:if="{{achievement.reward}}">
        <view class="reward-title">å¥–åŠ±</view>
        <view class="reward-content">{{achievement.reward}}</view>
      </view>
    </view>
    
    <!-- é‡Œç¨‹ç¢‘ -->
    <view class="section">
      <view class="section-title">é‡Œç¨‹ç¢‘</view>
      <view class="milestones-container">
        <block wx:if="{{milestones.length > 0}}">
          <view class="milestone-item {{item.isCompleted ? 'completed' : ''}}" wx:for="{{milestones}}" wx:key="title">
            <view class="milestone-icon">
              <text class="iconfont {{item.isCompleted ? 'icon-check' : 'icon-flag'}}"></text>
            </view>
            <view class="milestone-content">
              <view class="milestone-title">{{item.title}}</view>
              <view class="milestone-description">{{item.description}}</view>
            </view>
            <view class="milestone-value">{{item.value}}</view>
          </view>
        </block>
        <block wx:else>
          <view class="empty-list">æš‚æ— é‡Œç¨‹ç¢‘</view>
        </block>
      </view>
    </view>
    
    <!-- ç›¸å…³ä¹ æƒ¯ -->
    <view class="section">
      <view class="section-title">ç›¸å…³ä¹ æƒ¯</view>
      <view class="habits-container">
        <block wx:if="{{relatedHabits.length > 0}}">
          <view class="habit-item" wx:for="{{relatedHabits}}" wx:key="id" bindtap="navigateToHabit" data-id="{{item.id}}">
            <view class="habit-icon" style="background-color: {{item.color}}">
              <text class="iconfont icon-{{item.icon}}"></text>
            </view>
            <view class="habit-content">
              <view class="habit-name">{{item.name}}</view>
              <view class="habit-category">{{item.category}}</view>
            </view>
            <view class="habit-arrow">
              <text class="iconfont icon-arrow-right"></text>
            </view>
          </view>
        </block>
        <block wx:else>
          <view class="empty-list">æš‚æ— ç›¸å…³ä¹ æƒ¯</view>
        </block>
      </view>
    </view>
    
    <!-- åˆ†äº«æŒ‰é’® -->
    <view class="footer">
      <button class="btn btn-primary btn-share" open-type="share">
        <text class="iconfont icon-share"></text>
        åˆ†äº«æˆå°±
      </button>
    </view>
  </block>
</view> 
